/*
All of the code within the ZingChart software is developed and copyrighted by PINT, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from PINT. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 0.120622
*/
ZC.TB.push("nestedpie");ZC.VU=ZC.HW.B5({$i:function(b){this.b(b);this.AE="nestedpie";this.AZ=new ZC.UJ(this)},PF:function(){return""},I9:function(b){switch(b){case "m":return new ZC.PP(this)}},A1F:function(){var b=this.I9("m","scale");b.BI="scale";b.Q=this.Q+"-scale";this.B9.push(b);this.b()}});
ZC.UJ=ZC.J3.B5({$i:function(b){this.b(b);this.KW=[];this.JM=[]},A1P:function(){return new ZC.MK(this)},parse:function(){this.KW=[];this.JM=[];this.b();for(var b=0,a=this.AA.length;b<a;b++)if(this.D.I["plot"+b+".visible"]||this.D.getToggleAction()=="hide")for(var c=0,d=this.AA[b].P.length;c<d;c++)if(this.AA[b].P[c]!=null){var e=this.AA[b].P[c];if(this.JM[c]==null)this.JM[c]=this.AA[b].C7;var f=this.JM[c],h=f+360*e.A9/this.KW[c];this.JM[c]=h;e.AL=f;e.AW=h}}});
ZC.MK=ZC.FE.B5({$i:function(b){this.b(b);this.AE="nestedpie";this.B9=["scale"];this.C7=this.LN=this.NW=0;this.B0=null},A0X:function(){return new ZC.U4(this)},parse:function(){var b,a;if(this.o[ZC._[19]]==null)this.o[ZC._[19]]={};this.AX=this.J7();this.BK=this.AX[0];this.Y=this.AX[1];this.A8=this.AX[2];this.BP=this.AX[0];this.AT=this.AX[0];this.loadXPalette();this.b();this.B0=new ZC.E5(this);this.D.A.AU.load(this.B0.o,["graph.plot.value-box.connector",this.AE+".plot.value-box.connector"]);if((b=this.D.o.plot)!=
null)if(b[ZC._[19]]!=null&&(a=b[ZC._[19]].connector)!=null)this.B0.append(a);this.B0.append(this.o[ZC._[19]].connector);this.PY_a([["slice-start","NW","fp"],["offset","NW","fp"],["band-space","LN","fp"],["ref-angle","C7","i"]]);b=0;for(a=this.P.length;b<a;b++)if(this.P[b]!=null&&(this.D.I["plot"+this.K+".visible"]||this.D.getToggleAction()=="hide")){if(this.A.KW[b]==null)this.A.KW[b]=0;this.A.KW[b]+=ZC._f_(this.P[b].A9)}},paint:function(){this.b();this.GZ=this.BC("bl",0);this.JK(true)}});
ZC.U4=ZC.GJ.B5({setup:function(){var b=this.D.B2(this.A.BA("k")[0]);this.iX=b.iX+b.G/2+b.CE;this.iY=b.iY+b.E/2+b.CP;if(!this.FR){this.copy(this.A);this.o[ZC._[10]]=null;this.DM=this.A.DM;this.C5()&&this.parse(false);this.FR=1}},A2D:function(){var b=ZC.AV.BM(this.iX,this.iY,this.BR+this.I.bandwidth/2+this.DT,(this.AL+this.AW)/2%360);return[b[0],b[1]]},KX:function(b,a){var c=this.A.M5();ZC.EY(a,c);var d=this.A9*100/this.A.A.KW[this.K],e=new String(d);if(c[ZC._[14]]!=null)e=d.toFixed(ZC.BS(0,ZC._i_(c[ZC._[14]])));
this.DN=[["%node-percent-value",e],["%npv",e]];return b=this.b(b,a)},P5:function(b){var a={},c="in";if(b.o[ZC._[9]]!=null)c=b.o[ZC._[9]];a.color=c=="out"?this.Y:this.BK;return a},A15:function(b){var a="in";if(b.o[ZC._[9]]!=null)a=b.o[ZC._[9]];var c=(this.AL+this.AW)/2%360;if(a=="out")if(this.K==this.A.P.length-1){ZC._a_(0.1*this.AR*ZC.CG(c));var d=ZC.AV.BM(this.iX,this.iY,this.A.NW+(this.A.P.length+1)*(this.I.bandwidth+this.I.bandspace)-this.I.bandspace-this.I.bandwidth/2+b.DT,c);a=c>=0&&c<90||c>=
270&&c<360?d[0]+20+this.CE:d[0]-b.G-20+this.CE;b=d[1]-b.CD/2+this.CP}else b=a=-1;else{d=ZC.AV.BM(this.iX,this.iY,this.BR+this.I.bandwidth/2+b.DT,c);a=d[0]-b.D7/2+this.CE;b=d[1]-b.CD/2+this.CP}return[a,b,c]},G9:function(){var b=this,a=b.b();if(a.AO&&a.B1!=null&&a.B1!=""){var c="in";if(a.o[ZC._[9]]!=null)c=a.o[ZC._[9]];if(c=="out"&&b.K==b.A.P.length-1){c=new ZC.D0(b.A);c.X=c.BU=b.H.usc()?b.H.mc("top"):b.D.AQ["3d"]||b.H.L3?ZC.AN(b.D.Q+"-plots-vb-c"):ZC.AN(b.D.Q+"-plot-"+b.A.K+"-vb-c");c.append(b.A.B0.o);
b.P5(a);c.AT=b.Y;c.E9="line";c.C=[];var d=(b.AL+b.AW)/2%360;ZC._a_(0.1*b.AR*ZC.CG(d));var e=ZC.AV.BM(b.iX,b.iY,b.BR+b.I.bandwidth+a.DT,d);a=ZC.AV.BM(b.iX,b.iY,b.A.NW+(b.A.P.length+1)*(b.I.bandwidth+b.I.bandspace)-b.I.bandspace-b.I.bandwidth/2+a.DT,d);e[0]+=b.CE;a[0]+=b.CE;e[1]+=b.CP;a[1]+=b.CP;c.C.push(e,a);d>=0&&d<90||d>=270&&d<360?c.C.push([a[0]+20,a[1]]):c.C.push([a[0]-20,a[1]]);c.parse();c.GT=function(f){return b.GT(f)};c.C5()&&c.parse();c.AO&&c.paint()}}},paint:function(){function b(){var i=
f.DF(),j=a.D.Q+ZC._[36]+a.D.Q+ZC._[37]+a.A.K+ZC._[6];i=ZC.L.DI("poly")+'class="'+j+'" id="'+a.Q+ZC._[32]+i+'"/>';a.A.A.G0.push(i);a.A.T!=null&&a.G9()}var a=this;a.b();var c=a.D.B2(a.A.BA("k")[0]);a.setup();a.AR=ZC.CU(c.G,c.E)/2;a.AR=c.IL*a.AR;a.BR=a.A.NW;if(a.BR<1)a.BR=a.A.NW*a.AR;var d=a.A.LN;if(d<1)d=a.A.LN*a.AR;var e=(a.AR-a.BR-(a.A.P.length-1)*d)/a.A.P.length;e=ZC.BS(e,2);a.BR+=a.K*(e+d);a.AR=a.BR+e;c=a.A.FH(a,a);var f=new ZC.D0(a.A);f.Q=a.Q;f.X=a.A.BC("bl",1);f.BU=a.A.BC("bl",0);f.copy(c);f.iX=
a.iX;f.iY=a.iY;f.E9="pie";f.AL=a.AL;f.AW=a.AW;f.BR=a.BR;f.AR=a.AR;f.parse();var h=f.BR;a.I.bandwidth=e;a.I.bandspace=d;if(a.A.F9&&!a.D.FV){d=f;e={};d.AL=a.AL;d.AW=a.AW;e.angleStart=a.AL;e.angleEnd=a.AW;switch(a.A.H6){case 1:d.AB=0;e.alpha=c.AB;break;case 2:d.AB=0;d.AW=a.AL;e.alpha=c.AB;e.angleEnd=a.AW;break;case 3:d.AB=0;d.AW=a.AL;d.BR=h+a.I.bandwidth;e.alpha=c.AB;e.angleEnd=a.AW;e.slice=h;break;case 4:d.AB=0;h=ZC.AV.BM(a.iX,a.iY,a.AR,(a.AL+a.AW)/2);d.iX=h[0];d.iY=h[1];e.alpha=c.AB;e.x=a.iX;e.y=a.iY;
break;case 5:d.AB=0;d.AL=d.AW=(a.AL+a.AW)/2;e.alpha=c.AB;e.angleStart=a.AL;e.angleEnd=a.AW}for(var g in a.A.DH){d[ZC.C8.FI[ZC.CH(g)]]=a.A.DH[g];e[ZC.CH(g)]=c[ZC.C8.FI[ZC.CH(g)]]}if(a.D.CY==null)a.D.CY={};if(a.D.CY[a.A.K+"-"+a.K]!=null)for(g in a.D.CY[a.A.K+"-"+a.K])d[ZC.C8.FI[ZC.CH(g)]]=a.D.CY[a.A.K+"-"+a.K][g];a.D.CY[a.A.K+"-"+a.K]={};ZC.EY(e,a.D.CY[a.A.K+"-"+a.K]);g=new ZC.C8(d,e,a.A.FO,a.A.H2,ZC.C8.LJ[a.A.H5],function(){b()});g.B7=a;a.HH(g)}else{f.paint();b()}},A1W:function(b){var a=this;ZC.move||
a.HQ({layer:b,type:"shape",initcb:function(){this.copy(a);this.iX=a.iX;this.iY=a.iY;this.E9="pie";this.Y=a.A.AX[3];this.A8=a.A.AX[2];this.AL=a.AL;this.AW=a.AW;this.BR=a.BR;this.AR=a.AR},parsecb:function(){this.o[ZC._[10]]=null}})}});
