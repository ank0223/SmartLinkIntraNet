/*
All of the code within the ZingChart software is developed and copyrighted by PINT, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from PINT. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 0.120622
*/
ZC.TB.push("treemap");
(function(){var f=null;ZC.A3U=function(){this.Q=this.B1="";this.A3V=this.A3W=0;this.o={};this.aChildren=[];this.D=this.A=null;this.K=this.FT=0;this.A3X="#336699";this.A2S=function(){var a=0,g=0,c=[];if(this.aChildren.length>0){for(var i=0;i<this.aChildren.length;i++){c=this.aChildren[i].A2S();a+=c[0];g=Math.max(g,c[1])}this.A3W=a;this.A3V=g}else{a=this.A3W;g=this.A3V;this.D.A47=Math.max(this.D.A47,this.A3W);this.D.A2T=Math.min(this.D.A2T,this.A3W);this.D.A2Q=Math.max(this.D.A2Q,this.A3V);this.D.A2R=
Math.min(this.D.A2R,this.A3V)}return[a,g]};this.sortChildren=function(){if(this.aChildren.length>0){this.aChildren.sort(function(g,c){return g.B1=="./"||g.B1.indexOf("index.")>0?-1:c.B1=="./"||c.B1.indexOf("index.")>0?1:g.A3W>c.A3W?-1:g.A3W<c.A3W?1:0});for(var a=0;a<this.aChildren.length;a++)this.aChildren[a].sortChildren()}}};ZC.A3T=function(){this.H=null;this.G=800;this.E=600;this.A2I=[];this.A2T=ZC.MAX;this.A47=-ZC.MAX;this.A2R=ZC.MAX;this.A2Q=-ZC.MAX;this.A2G=[];this.A2J=[];this.A2O=0;this.A3X=
"";this.A2N=0;this.A2K=[];this.A35=5;this.iMaxChildren=10;this.aMaxChildren=[];this.A2U="balanced";this.A2V="palette";this.A2Y=0;this.A2X=0.4;this.A2W="#336699";this.A38="#99ccff";this.A33=0;this.AX=["#00B0E2","#FF9C00","#696868","#cc3300","#6d6d22","#666697","#874c11","#195272"];this.BD={scaleToPlotarea:true,textAlign:"left",verticalAlign:"top",borderWidth:1,color:"#fff",bold:0};ZC.SJ(this.BD);this.A2M=null;this.A2H={padding:8,borderWidth:1,shadow:0,borderColor:"#fff",color:"#fff",bold:0,text:"%text:%value-size"};
ZC.SJ(this.A2H);this.A3A={padding:8,borderWidth:1,shadow:0,borderColor:"#fff",color:"#fff",bold:0,text:"%text"};ZC.SJ(this.A3A);this.FM={backgroundColor:"#fff",alpha:0.4,borderColor:"#000"};ZC.SJ(this.FM);this.A34={};this.parse=function(a,g){if(g==0){this.A2M=new ZC.D5(this.H);this.A2M.append(this.BD);this.A2M.parse()}for(var c,i=[],d=0;d<a.length;d++){var j=new ZC.A3U;j.B1=a[d].text;j.Q=a[d].id||a[d].text;j.Q=j.Q.replace(/[^a-z0-9]+/gi,"");if((c=a[d][ZC._[11]])!=null)j.A3W=j.A3V=parseFloat(c);if((c=
a[d]["value-size"])!=null)j.A3W=j.A3V=parseFloat(c);if((c=a[d]["value-aspect"])!=null)j.A3V=parseFloat(c);for(var l in a[d])if(a[d].hasOwnProperty(l)&&l.substring(0,5)=="data-")j.o[l]=a[d][l]||"";j.D=this;j.FT=g;j.K=this.A2G.length;if(g==0){j.A=null;this.A2G.push(j);this.A2J.push(j)}if(a[d].children&&a[d].children.length>0){j.aChildren=this.parse(a[d].children,g+1);for(c=0;c<j.aChildren.length;c++){this.A2J.push(j.aChildren[c]);j.FT=g;j.aChildren[c].A=j}}i.push(j)}return i};this.A30=function(a,g){for(var c=
0;c<a.length;c++){a[c].A3X=a[c].FT==this.A2N?this.A33?this.AX[c%this.AX.length]:ZC.BQ.LH(this.AX[c%this.AX.length]):g;a[c].aChildren.length>0&&this.A30(a[c].aChildren,a[c].A3X)}};this.paint=function(){if(this.A2G.length==1)this.A2N=1;this.A30(this.A2G);for(var a=0;a<this.A2G.length;a++){this.A2G[a].A2S();this.A47=Math.max(this.A47,this.A2G[a].A3W);this.A2T=Math.min(this.A2T,this.A2G[a].A3W);this.A2Q=Math.max(this.A2Q,this.A2G[a].A3V);this.A2R=Math.min(this.A2R,this.A2G[a].A3V)}this.A37();for(a=0;a<
this.A2G.length;a++)this.A2G[a].sortChildren();this.A2O=0;this.A2K=this.A2G;this.render(this.A2G,0,0,this.G,this.E,0,0)};this.render=function(a,g,c,i,d,j,l){j==0&&this.A2L(null,0,0,this.G,this.E,"#fff","#000",0,1);if(a.length>1){var b=0,n=[],e;e=typeof this.aMaxChildren[j]!=ZC._[33]?Math.min(this.aMaxChildren[j],a.length):Math.min(this.iMaxChildren,a.length);for(b=0;b<e;b++)n.push(a[b]);a=n;n=[];e=[];var h=0,k=0;switch(this.A2U){case "alternate":for(b=0;b<a.length;b++)if(b%2==0){n.push(a[b]);h+=a[b].A3W}else{e.push(a[b]);
k+=a[b].A3W}break;default:var m=1;for(b=0;b<a.length;b++){m=h<=k?1:2;if(m==1){n.push(a[b]);h+=a[b].A3W}else{e.push(a[b]);k+=a[b].A3W}}break;case "horizontal":case "vertical":for(b=0;b<a.length;b++)if(b<a.length/2){n.push(a[b]);h+=a[b].A3W}else{e.push(a[b]);k+=a[b].A3W}}a=h/(h+k);var o=m=k=h=b=0,p=0;switch(this.A2U){case "alternate":if(l%2==0){b=Math.ceil(i*a);h=d;k=Math.abs(i-b);m=d;o=b;p=0}else{b=i;h=Math.ceil(d*a);k=i;m=Math.abs(d-h);o=0;p=h}break;default:b=Math.ceil(i*a);h=d;k=Math.abs(i-b);m=
d;o=0;if(h+m>0)o=(b+k)/(h+m);o=o<1&&o>0?1/o:o;b=i;h=Math.ceil(d*a);k=i;m=Math.abs(d-h);p=0;if(h+m>0)p=(b+k)/(h+m);p=p<1&&p>0?1/p:p;if(o<p){b=Math.ceil(i*a);h=d;k=Math.abs(i-b);m=d;o=b;p=0}else{b=i;h=Math.ceil(d*a);k=i;m=Math.abs(d-h);o=0;p=h}break;case "vertical":b=Math.ceil(i*a);h=d;k=Math.abs(i-b);m=d;o=b;p=0;break;case "horizontal":b=i;h=Math.ceil(d*a);k=i;m=Math.abs(d-h);o=0;p=h}this.render(n,g,c,b,h,j,l+1);this.render(e,g+o,c+p,k,m,j,l+1)}else if(a.length==1&&a[0].FT-this.A2O<this.A35){if(a[0].aChildren.length>
0){if(a[0].B1.substring(0,3)=="[+]"||a[0].B1.substring(0,3)=="[-]")a[0].B1=a[0].B1.substring(3);a[0].B1=l==0?"[-] "+a[0].B1:"[+] "+a[0].B1}n=1;switch(this.A2V){case "random":e=this.A2P();break;case "red":e=75+ZC._i_(180*(a[0].A3V-this.A2R)/(this.A2Q-this.A2R));e="#"+e.toString(16)+"0000";break;case "green":e=75+ZC._i_(180*(a[0].A3V-this.A2R)/(this.A2Q-this.A2R));e="#00"+e.toString(16)+"00";break;case "blue":e=75+ZC._i_(180*(a[0].A3V-this.A2R)/(this.A2Q-this.A2R));e="#0000"+e.toString(16);break;default:b=
40*(a[0].A3V-this.A2R)/(this.A2Q-this.A2R);if(this.A33){e={};ZC.EY(a[0].A3X,e);if(e.gradientColors!=null){h=e.gradientColors.split(/\s/);k=0;for(m=h.length;k<m;k++)h[k]=ZC.BQ.KL(ZC.BQ.LH(h[k]),b);e.gradientColors=h.join(" ")}else if(e.backgroundColor!=null){h=e.backgroundColor.split(/\s/);k=0;for(m=h.length;k<m;k++)h[k]=ZC.BQ.KL(ZC.BQ.LH(h[k]),b);e.backgroundColor=h.join(" ")}}else e=ZC.BQ.KL(ZC.BQ.LH(a[0].A3X),b);break;case "transition":e=ZC.BQ.LH(this.A2W);b=ZC.BQ.LH(this.A38);e=[parseInt(e.substring(1,
3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)];b=[parseInt(b.substring(1,3),16),parseInt(b.substring(3,5),16),parseInt(b.substring(5,7),16)];h=(a[0].A3V-this.A2R)/(this.A2Q-this.A2R);e=[e[0]+ZC._i_((b[0]-e[0])*h),e[1]+ZC._i_((b[1]-e[1])*h),e[2]+ZC._i_((b[2]-e[2])*h)];e="#"+this.A31(e[0].toString(16))+this.A31(e[1].toString(16))+this.A31(e[2].toString(16))}if(this.A2Y)n=this.A2X+(1-this.A2X)*(a[0].A3V-this.A2R)/(this.A2Q-this.A2R);this.A2L(a[0],g,c,i,d,e,n);a[0].aChildren.length>
0&&this.render(a[0].aChildren,g+4,c+this.A2M.GR+this.A2M.HY+this.A2M.DS*1.5,i-8,d-this.A2M.GR-this.A2M.HY-this.A2M.DS*1.5-4,j+1,l)}};this.A37=function(){this.A2G.sort(function(a,g){return a.B1=="./"||a.B1.indexOf("index.")>0?-1:g.B1=="./"||g.B1.indexOf("index.")>0?1:a.A3W>g.A3W?-1:a.A3W<g.A3W?1:0})};this.A2P=function(){for(var a=(Math.random()*16777215+1<<0).toString(16);a.length<6;)a="0"+a;return"#"+a};this.A31=function(a){if(a.length==1)a="0"+a;return a};this.A32=function(a,g,c){return a.substring(0,
Math.floor(g/(c*0.7)))};this.A2L=function(a,g,c,i,d,j,l){if(a){i=Math.min(Math.max(i,0),this.G);d=Math.min(Math.max(d,0),this.E);var b=this.A2M.AD;if(i>1&&d>1){if(this.A33){n={};ZC.EY(j,n)}else var n={backgroundColor:j};ZC.SJ(n);a.aChildren.length==0?ZC.EY(this.A2H,n):ZC.EY(this.A3A,n);var e=["value-aspect","value-size",ZC._[11],"text"],h={text:a.B1.replace("[-] ","").replace("[+] ",""),value:a.A3W,"value-size":a.A3W,"value-aspect":a.A3V},k;for(k in a.o)if(a.o.hasOwnProperty(k))h[k]=a.o[k];k=0;for(var m=
e.length;k<m;k++)n.text=n.text.replace("%"+e[k],h[e[k]]);e={};ZC.EY(this.FM,e);a={x:Math.max(0,g-b),y:Math.max(0,c-b),id:a?a.Q:"","static":false,width:i+b,height:d+b,text:d>this.A2M.DS*1.5&&i>20?this.A32(a.B1,i,this.A2M.DS):"",borderColor:ZC.BQ.KL(ZC.BQ.LH(j),40),alpha:l,tooltip:n,hoverState:e};if(this.A33)ZC.EY(j,a);else a.backgroundColor=j;ZC.SJ(a);ZC.EY(this.BD,a);this.A2I.push(a)}}}};var q=zingchart.label_click;zingchart.label_click=function(a){q!=null&&q(a);if(!(a.ev.button>0)){zingchart.exec(a.id,
"disable");window.setTimeout(function(){var g=0;if(f.A34[a.labelid]!=null){f.A2I=[];if(f.A34[a.labelid].A){f.A2K=[f.A34[a.labelid].A];f.A2O=f.A34[a.labelid].FT-1}else{f.A2K=f.A2G;f.A34[a.labelid].FT=0}f.A34[a.labelid]=null;g=1}else{for(var c=-1,i=null,d=0;d<f.A2J.length;d++)if(f.A2J[d].Q==a.labelid){c=d;i=f.A2J[d];break}if(c!=-1){g=1;for(f.A34[a.labelid]=i;i.A;){i=i.A;f.A34[i.Q]=i}f.A2I=[];f.A2K=[f.A2J[c]]}}if(g){f.render(f.A2K,0,0,f.G,f.E,0,0);zingchart.GQ[0].AY[0].o[ZC._[12]]=f.A2I;zingchart.GQ[0].AY[0].HA();
zingchart.exec(a.id,"enable")}},50)}};var r=zingchart.dataparse;zingchart.dataparse=function(a,g){var c;if(r!=null)g=r(a,g);for(var i=zingchart.loader(a.id),d=0,j=g[ZC._[18]].length;d<j;d++)if(g[ZC._[18]][d].type&&g[ZC._[18]][d].type=="treemap"){c=g[ZC._[18]][d].type;var l=g[ZC._[18]][d],b={};if(l.options)b=l.options[c]||l.options;ZC.SJ(b);l[ZC._[13]]=l[ZC._[13]]||[];l[ZC._[13]][0]=l[ZC._[13]][0]||{};l[ZC._[12]]=l[ZC._[12]]||[];l.type="null";f=new ZC.A3T;f.H=i;f.G=a.width;f.E=a.height;if((c=b["max-depth"])!=
null)f.A35=ZC._i_(c);if((c=b["max-children"])!=null)if(c instanceof Array)f.aMaxChildren=c;else f.iMaxChildren=ZC._i_(c);if((c=b["split-type"])!=null)f.A2U=c;if((c=b["aspect-type"])!=null)f.A2V=c;if((c=b["alpha-aspect"])!=null)f.A2Y=ZC._b_(c);if((c=b["min-alpha"])!=null)f.A2X=ZC._f_(c);if((c=b.palette)!=null){f.AX=c;if(c[0]instanceof Object&&f.A2V=="palette")f.A33=1}if((c=b["color-start"])!=null)f.A2W=c;if((c=b["color-end"])!=null)f.A38=c;if((c=b.box)!=null)ZC.EY(c,f.BD);if((c=b["tooltip-box"])!=
null)ZC.EY(c,f.A2H);if((c=b["tooltip-group"])!=null)ZC.EY(c,f.A3A);if((c=b["hover-state"])!=null)ZC.EY(c,f.FM);f.parse(l[ZC._[13]],0);f.paint();l[ZC._[12]]=l[ZC._[12]].concat(f.A2I)}return g}})();
