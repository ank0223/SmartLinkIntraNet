/*
All of the code within the ZingChart software is developed and copyrighted by PINT, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from PINT. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 0.120622
*/
ZC.TB.push("maps");if(!zingchart.maps){zingchart.maps={};zingchart.maps.maps={};zingchart.maps.data={}}zingchart.maps.FORCESCALE=0;zingchart.maps.getInfo=function(c){var g=zingchart.maps.maps[c];g||(g=eval("zingchart.maps.data."+c));if(g)return g._INFO_||g;return null};
zingchart.maps.getItems=function(c){var g=zingchart.maps.maps[c];g||(g=eval("zingchart.maps.data."+c));if(g){c=[];for(var d in g)if(d!="_DEFAULTS_"&&d!="_INFO_"&&d!="_GROUPS_")if(g._INFO_)ZC.AH(g._INFO_.items,d)!=-1&&c.push(d);else c.push(d);return c}return null};
zingchart.maps.getItemInfo=function(c,g){var d,i;if(d=zingchart.maps.maps[c]){if(i=d[g]){zingchart.maps.lonlat2xy(d._INFO_.x,d._INFO_.y,d._INFO_.width,d._INFO_.height,[i.bbox[0]+(i.bbox[2]-i.bbox[0])/2,i.bbox[1]+(i.bbox[3]-i.bbox[1])/2],d._INFO_.bbox);return i}}else if((d=eval("zingchart.maps.data."+c))&&(i=d[g]))return i;return null};
zingchart.maps.getXY=function(c,g){var d;if(d=zingchart.maps.maps[c])return zingchart.maps.lonlat2xy(d._INFO_.x,d._INFO_.y,d._INFO_.width,d._INFO_.height,g,d._INFO_.bbox);return null};zingchart.maps.getLonLat=function(c,g){var d;if(d=zingchart.maps.maps[c])return zingchart.maps.xy2lonlat(d._INFO_.x,d._INFO_.y,d._INFO_.width,d._INFO_.height,g,d._INFO_.bbox);return null};
zingchart.maps.lonlat2xy=function(c,g,d,i,k,f){var n=d/ZC._a_(f[2]-f[0]);d=i/ZC._a_(f[3]-f[1]);c=c+(ZC._f_(k[0])-ZC.CU(f[0],f[2]))*n;g=g+i-(ZC._f_(k[1])-ZC.CU(f[1],f[3]))*d;return[c,g]};zingchart.maps.xy2lonlat=function(c,g,d,i,k,f){d=d/ZC._a_(f[2]-f[0]);i=i/ZC._a_(f[3]-f[1]);return[f[0]+(k[0]-c)/d,f[1]+(g-k[1])/i]};
zingchart.maps.mappoints=function(c,g,d,i,k,f){d=d/ZC._a_(k[2]-k[0]);var n=i/ZC._a_(k[3]-k[1]),m=[],o,p,j,e;p=c+(ZC.CU(f.bbox[0],f.bbox[2])-ZC.CU(k[0],k[2]))*d;j=g+i-(ZC.CU(f.bbox[1],f.bbox[3])-ZC.CU(k[1],k[3]))*n;ZC._a_(f.bbox[2]-f.bbox[0]);e=Math.abs(f.bbox[3]-f.bbox[1])*n;for(var b=0,a=f.coords.length;b<a;b++)if(f.coords[b]==null)m.push(null);else{i=c+(f.coords[b][0]-ZC.CU(k[0],k[2]))*d+f.transform.offsetLon*d;o=g+(ZC.BS(k[1],k[3])-f.coords[b][1])*n-f.transform.offsetLat*n;if(f.transform.scale!=
1){i=p+(i-p)*f.transform.scale;o=j-e+(o-(j-e))*f.transform.scale}m.push([ZC._i_(i),ZC._i_(o)])}return m};zingchart.maps.translate=function(c,g,d,i,k){d=d/ZC._a_(k[2]-k[0]);i=i/ZC._a_(k[3]-k[1]);return c=="x"?g*d:g*i};
zingchart.maps.convert=function(c){var g=c.data.options||{},d=c.id,i=ZC._i_(c.x),k=ZC._i_(c.y),f=ZC._i_(c.width),n=ZC._i_(c.height),m=c.groups,o=c.items,p=c.ignore,j=c.bbox,e={};ZC.EY(c.map,e);if(f==0||n==0||!e)return[];var b,a;for(a in e)if(!(a=="_DEFAULTS_"||a=="_INFO_"||a=="_GROUPS_")){b=[ZC.MAX,-ZC.MAX,-ZC.MAX,ZC.MAX];for(var h=0;h<e[a].coords.length;h++)if(e[a].coords[h]!=null){b[0]=ZC.CU(b[0],e[a].coords[h][0]+e[a].transform.offsetLon);b[1]=ZC.BS(b[1],e[a].coords[h][1]+e[a].transform.offsetLat);
b[2]=ZC.BS(b[2],e[a].coords[h][0]+e[a].transform.offsetLon);b[3]=ZC.CU(b[3],e[a].coords[h][1]+e[a].transform.offsetLat)}if(e[a].transform.scale!=1){b[2]=b[0]+(b[2]-b[0])*e[a].transform.scale;b[3]=b[1]-(b[1]-b[3])*e[a].transform.scale}h=ZC.CU(1,ZC._a_(b[2]-b[0])/8);var l=ZC.CU(1,ZC._a_(b[3]-b[1])/8);b[0]-=h;b[1]+=l;b[2]+=h;b[3]-=l;b[0]=ZC.BS(b[0],-180);b[1]=ZC.CU(b[1],90);b[2]=ZC.CU(b[2],180);b[3]=ZC.BS(b[3],-90);e[a].bbox=b}b=[ZC.MAX,-ZC.MAX,-ZC.MAX,ZC.MAX];l=[];if(m.length>0&&e._GROUPS_){h=0;for(var s=
m.length;h<s;h++)if(e._GROUPS_[m[h]])l=l.concat(e._GROUPS_[m[h]])}if(o.length>0){h=0;for(s=o.length;h<s;h++)ZC.AH(p,o[h])==-1&&l.push(o[h])}else for(a in e)if(e.hasOwnProperty(a))a=="_DEFAULTS_"||a=="_INFO_"||a=="_GROUPS_"||m.length==0&&ZC.AH(p,a)==-1&&l.push(a);for(h=l.length-1;h>=0;h--)if(l[h]&&l[h].indexOf("@")!=-1){a=l[h].split("@");ZC.AH(l,a[0])!=-1&&l.splice(h,1)}if(j!=null&&j.length==4)b=j;else{h=0;for(s=l.length;h<s;h++){a=l[h];if(e[a]){b[0]=ZC.CU(b[0],e[a].bbox[0]);b[1]=ZC.BS(b[1],e[a].bbox[1]);
b[2]=ZC.BS(b[2],e[a].bbox[2]);b[3]=ZC.CU(b[3],e[a].bbox[3])}}}e._INFO_={x:i,y:k,width:f,height:n,id:d,bbox:b,groups:m,items:l,ignore:p};zingchart.maps.maps[d]=e;m=f/ZC._a_(b[2]-b[0]);p=n/ZC._a_(b[3]-b[1]);j={};h=0;for(s=l.length;h<s;h++){a=l[h];if(e[a]){j[a]={type:"poly",id:a,points:zingchart.maps.mappoints(i,k,f,n,b,e[a]),label:{map:d},tooltip:{},connector:{}};for(var u=o=0,t=0,q,r=0,v=j[a].points.length;r<v-1;r++)if((c=j[a].points[r])!=null&&(q=j[a].points[r+1])!=null)t+=c[0]*q[1]-q[0]*c[1];t*=
0.5;r=0;for(v=j[a].points.length;r<v-1;r++)if((c=j[a].points[r])!=null&&(q=j[a].points[r+1])!=null){o+=(c[0]+q[0])*(c[0]*q[1]-q[0]*c[1]);u+=(c[1]+q[1])*(c[0]*q[1]-q[0]*c[1])}o/=6*t;u/=6*t;e[a].cpoint=[o,u];e._DEFAULTS_&&ZC.EY(e._DEFAULTS_,j[a]);e[a].style&&ZC.EY(e[a].style,j[a]);ZC.SJ(j[a]);ZC.EY(g.style,j[a]);ZC.EY(e[a].tooltip,j[a].tooltip);ZC.EY(e[a].label,j[a].label);ZC.EY(e[a].connector,j[a].connector);g.style!=null&&g.style.items!=null&&ZC.EY(g.style.items[a],j[a]);if(j[a].connector.points!=
null){c=0;for(t=j[a].connector.points.length;c<t;c++)j[a].connector.points[c]=zingchart.maps.lonlat2xy(i,k,f,n,j[a].connector.points[c],b)}if(j[a].label.x==null)j[a].label.x=o;if(j[a].label.y==null)j[a].label.y=u}}if(!zingchart.maps.FORCESCALE&&(m/p>1.05||m/p<0.95))j._ALERT_={type:"circle",id:"_ALERT_",x:i+10,y:k+10,size:8,backgroundColor:"#c00",label:{color:"#fff",bold:true,text:"!"},tooltip:{text:"Scaling Error<br/>Use "+f+"/"+ZC._i_(n*m/p)+" or "+ZC._i_(f*p/m)+"/"+n,backgroundColor:"#c00",borderRadius:8,
color:"#fff"}};return j};
